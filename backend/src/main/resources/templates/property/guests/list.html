<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guest Management - Property Management</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:#f5f7fa; color:#333; }
        .header { background:linear-gradient(135deg,#667eea 0%,#764ba2 100%); color:#fff; padding:20px 0; box-shadow:0 2px 10px rgba(0,0,0,0.1); }
        .header-content { max-width:1200px; margin:0 auto; padding:0 20px; display:flex; justify-content:space-between; align-items:center; }
        .header h1 { font-size:2rem; font-weight:300; }
        .nav-links a { color:#fff; text-decoration:none; margin-left:20px; padding:8px 15px; border-radius:5px; transition:background .3s; }
        .nav-links a:hover { background:rgba(255,255,255,.2); }
        .container { max-width:1200px; margin:0 auto; padding:20px; }
        .page-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; flex-wrap:wrap; gap:15px; }
        .search-form form { display:flex; gap:10px; }
        .search-form input { padding:10px; border:1px solid #ddd; border-radius:5px; width:260px; }
        .btn { padding:10px 20px; background:linear-gradient(45deg,#667eea,#764ba2); color:#fff; border:none; border-radius:5px; text-decoration:none; font-weight:600; cursor:pointer; transition:transform .3s; }
        .btn:hover { transform:translateY(-2px); text-decoration:none; color:#fff; }
        .alert { padding:15px; border-radius:8px; margin-bottom:20px; }
        .alert-success { background:#d4edda; color:#155724; border:1px solid #c3e6cb; }
        .alert-danger { background:#f8d7da; color:#721c24; border:1px solid #f5c6cb; }
        table { width:100%; border-collapse:collapse; background:#fff; box-shadow:0 2px 10px rgba(0,0,0,0.05); border-radius:10px; overflow:hidden; }
        thead th { background:#667eea; color:#fff; padding:12px 10px; text-align:left; font-weight:600; font-size:.9rem; }
        tbody td { padding:12px 10px; border-bottom:1px solid #f1f3f4; font-size:.9rem; }
        tbody tr:hover { background:#f8f9fa; }
        .status-badge { padding:5px 10px; border-radius:20px; font-size:.7rem; font-weight:600; letter-spacing:.5px; text-transform:uppercase; }
        .badge-active { background:#d4edda; color:#155724; }
        .badge-inactive { background:#f8d7da; color:#721c24; }
        .actions { display:flex; gap:8px; align-items:center; }
        .action-link { padding:6px 10px; border-radius:5px; font-size:.75rem; text-decoration:none; font-weight:600; display:inline-block; }
        .view { background:#17a2b8; color:#fff; }
        .edit { background:#ffc107; color:#333; }
        .delete-btn { background:#dc3545; color:#fff; border:none; cursor:pointer; padding:6px 10px; border-radius:5px; font-weight:600; font-size:.75rem; }
        .delete-btn:hover { opacity:.9; }
        .empty-state { text-align:center; padding:60px; color:#666; }
        .empty-state div { font-size:4rem; margin-bottom:20px; opacity:.5; }
        @media (max-width:768px){ thead { display:none; } table, tbody, tr, td { display:block; width:100%; } tr { margin-bottom:15px; box-shadow:0 2px 6px rgba(0,0,0,0.05); border-radius:8px; overflow:hidden; } td { border:none; position:relative; padding-left:50%; } td::before { content:attr(data-label); position:absolute; left:15px; top:12px; font-weight:600; color:#555; font-size:.75rem; text-transform:uppercase; letter-spacing:.5px;} .actions { justify-content:flex-start; } }
    </style>
</head>
<body>
<div class="header">
    <div class="header-content">
        <h1>ðŸ‘¥ Guest Management</h1>
        <div class="nav-links">
            <a href="/property/dashboard">Dashboard</a>
            <a href="/property/rooms">Rooms</a>
            <a href="/property/guests">Guests</a>
            <a href="/property/bookings">Bookings</a>
            <a href="/property/payments">Payments</a>
            <a href="/property/logout">Logout</a>
        </div>
    </div>
</div>
<div class="container">
    <div th:replace="property/fragments/messages :: flashMessages"></div>
    <div class="page-header">
        <h2>Guests</h2>
        <div class="search-form">
            <form th:action="@{/property/guests}" method="get">
                <input type="text" name="search" th:value="${search}" placeholder="Search guests...">
                <button type="submit" class="btn">Search</button>
            </form>
            <a href="/property/guests/new" class="btn">âž• Add Guest</a>
        </div>
    </div>
    <div th:if="${guests == null or #lists.isEmpty(guests)}" class="empty-state">
        <div>ðŸ‘¤</div>
        <h3>No Guests Found</h3>
        <p>Add your first guest to begin managing bookings.</p>
    </div>
    <table th:if="${guests != null and !#lists.isEmpty(guests)}">
        <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="g : ${guests}">
            <td data-label="ID" th:text="${g.id}">1</td>
            <td data-label="Name" th:text="${g.firstName + ' ' + g.lastName}">Name</td>
            <td data-label="Email" th:text="${g.email}">email</td>
            <td data-label="Phone" th:text="${g.phoneNumber}">phone</td>
            <td data-label="Status">
                <span th:class="${'status-badge ' + (g.isActive ? 'badge-active' : 'badge-inactive')}"
                      th:text="${g.isActive ? 'ACTIVE' : 'INACTIVE'}">ACTIVE</span>
            </td>
            <td data-label="Actions">
                <div class="actions">
                    <a th:href="@{/property/guests/{id}(id=${g.id})}" class="action-link view">View</a>
                    <a th:href="@{/property/guests/{id}/edit(id=${g.id})}" class="action-link edit">Edit</a>
                    <form th:action="@{/property/guests/{id}/delete(id=${g.id})}" method="post" style="display:inline" onsubmit="return confirm('Deactivate guest?');">
                        <button type="submit" class="delete-btn">Deactivate</button>
                    </form>
                </div>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>
