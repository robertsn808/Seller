<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Management - Property Management</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:#f5f7fa; color:#333; }
        .header { background:linear-gradient(135deg,#667eea 0%,#764ba2 100%); color:#fff; padding:20px 0; box-shadow:0 2px 10px rgba(0,0,0,0.1); }
        .header-content { max-width:1200px; margin:0 auto; padding:0 20px; display:flex; justify-content:space-between; align-items:center; }
        .header h1 { font-size:2rem; font-weight:300; }
        .nav-links a { color:#fff; text-decoration:none; margin-left:20px; padding:8px 15px; border-radius:5px; transition:background .3s; }
        .nav-links a:hover { background:rgba(255,255,255,.2); }
        .container { max-width:1200px; margin:0 auto; padding:20px; }
        .page-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; flex-wrap:wrap; gap:15px; }
        .filters form { display:flex; gap:10px; flex-wrap:wrap; }
        .filters input, .filters select { padding:10px; border:1px solid #ddd; border-radius:5px; }
        .btn { padding:10px 20px; background:linear-gradient(45deg,#667eea,#764ba2); color:#fff; border:none; border-radius:5px; text-decoration:none; font-weight:600; cursor:pointer; transition:transform .3s; }
        .btn:hover { transform:translateY(-2px); text-decoration:none; color:#fff; }
        .alert { padding:15px; border-radius:8px; margin-bottom:20px; }
        .alert-success { background:#d4edda; color:#155724; border:1px solid #c3e6cb; }
        .alert-danger { background:#f8d7da; color:#721c24; border:1px solid #f5c6cb; }
        table { width:100%; border-collapse:collapse; background:#fff; box-shadow:0 2px 10px rgba(0,0,0,0.05); border-radius:10px; overflow:hidden; }
        thead th { background:#667eea; color:#fff; padding:12px 10px; text-align:left; font-weight:600; font-size:.85rem; letter-spacing:.5px; }
        tbody td { padding:12px 10px; border-bottom:1px solid #f1f3f4; font-size:.85rem; }
        tbody tr:hover { background:#f8f9fa; }
        .status-badge { padding:5px 10px; border-radius:20px; font-size:.65rem; font-weight:600; letter-spacing:.5px; text-transform:uppercase; }
        .status-active { background:#d4edda; color:#155724; }
        .status-completed { background:#cce5ff; color:#004085; }
        .status-cancelled { background:#f8d7da; color:#721c24; }
        .actions { display:flex; gap:8px; align-items:center; }
        .action-link { padding:6px 10px; border-radius:5px; font-size:.7rem; text-decoration:none; font-weight:600; display:inline-block; }
        .view { background:#17a2b8; color:#fff; }
        .edit { background:#ffc107; color:#333; }
        .empty-state { text-align:center; padding:60px; color:#666; }
        .empty-state div { font-size:4rem; margin-bottom:20px; opacity:.5; }
        @media (max-width:768px){ thead { display:none; } table, tbody, tr, td { display:block; width:100%; } tr { margin-bottom:15px; box-shadow:0 2px 6px rgba(0,0,0,0.05); border-radius:8px; overflow:hidden; } td { border:none; position:relative; padding-left:50%; } td::before { content:attr(data-label); position:absolute; left:15px; top:12px; font-weight:600; color:#555; font-size:.65rem; text-transform:uppercase; letter-spacing:.5px;} .actions { justify-content:flex-start; } }
    </style>
</head>
<body>
<div class="header">
    <div class="header-content">
        <h1>ðŸ“… Booking Management</h1>
        <div class="nav-links">
            <a href="/property/dashboard">Dashboard</a>
            <a href="/property/rooms">Rooms</a>
            <a href="/property/guests">Guests</a>
            <a href="/property/bookings">Bookings</a>
            <a href="/property/payments">Payments</a>
            <a href="/property/logout">Logout</a>
        </div>
    </div>
</div>
<div class="container">
    <div th:replace="property/fragments/messages :: flashMessages"></div>
    <div class="page-header">
        <h2>Bookings</h2>
        <div class="filters">
            <form th:action="@{/property/bookings}" method="get">
                <input type="text" name="search" th:value="${search}" placeholder="Search bookings...">
                <select name="status" th:value="${status}">
                    <option value="">Status</option>
                    <option value="ACTIVE" th:selected="${status=='ACTIVE'}">Active</option>
                    <option value="COMPLETED" th:selected="${status=='COMPLETED'}">Completed</option>
                    <option value="CANCELLED" th:selected="${status=='CANCELLED'}">Cancelled</option>
                </select>
                <button type="submit" class="btn">Filter</button>
            </form>
            <a href="/property/bookings/new" class="btn">âž• New Booking</a>
        </div>
    </div>
    <div th:if="${bookings == null or #lists.isEmpty(bookings)}" class="empty-state">
        <div>ðŸ“…</div>
        <h3>No Bookings Found</h3>
        <p>Create a booking to get started.</p>
    </div>
    <table th:if="${bookings != null and !#lists.isEmpty(bookings)}">
        <thead>
        <tr>
            <th>ID</th>
            <th>Room</th>
            <th>Guest</th>
            <th>Check In</th>
            <th>Check Out</th>
            <th>Status</th>
            <th>Charges</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="b : ${bookings}">
            <td data-label="ID" th:text="${b.id}">1</td>
            <td data-label="Room" th:text="${b.room != null ? b.room.roomNumber : 'N/A'}">101</td>
            <td data-label="Guest" th:text="${b.guest != null ? b.guest.firstName + ' ' + b.guest.lastName : 'N/A'}">Guest</td>
            <td data-label="Check In" th:text="${#temporals.format(b.checkInDate, 'MM/dd/yyyy')}">2024-01-01</td>
            <td data-label="Check Out" th:text="${b.checkOutDate != null ? #temporals.format(b.checkOutDate, 'MM/dd/yyyy') : 'â€”'}">2024-01-02</td>
            <td data-label="Status">
                <span th:class="${'status-badge ' + (b.bookingStatus == 'ACTIVE' ? 'status-active' : (b.bookingStatus == 'COMPLETED' ? 'status-completed' : 'status-cancelled'))}"
                      th:text="${b.bookingStatus}">ACTIVE</span>
            </td>
            <td data-label="Charges" th:text="${'$' + b.totalCharges}">$0.00</td>
            <td data-label="Actions">
                <div class="actions">
                    <a th:href="@{/property/bookings/{id}(id=${b.id})}" class="action-link view">View</a>
                    <a th:href="@{/property/bookings/{id}/edit(id=${b.id})}" class="action-link edit">Edit</a>
                </div>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>
